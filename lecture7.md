# Raisetech 第七回講義

## 講義内容

- セキュリティ基礎知識
- セキュリティ対策計画の主体は誰？
- 脆弱性
- 認証情報の流出
- 人為的な過負荷（サーバー攻撃）
- その他の知っておいた方が良いセキュリティ対策サービス

### 基礎知識

セキュリティとは「現在動いているサービスのパスワードがネット上に公開されている」「パスワードが間違ってもログインできる」などのサービスをそもそも使いたくないと思うのでそれらの問題に対して対策を行うこと。
対策を行うためにはリスクへの理解、対策を決めておく必要がある。基本原則としては想定されるリスクを洗い出し、対策方針を定義すること。対策方針としては４つに分類され、受容、低減、移転（転換）、回避に分類される。詳しい説明は下記の通り。

1. 受容
   発生する影響をみてそのままでも良いと判断すること。放置しても影響が大きくないものはこの対策がとられることが多い。例としては個人の食事記録など流出しても影響が小さいもの。ここで注意するべきなのはセキュリティリスクを加味した上で受容の判断を下す点。リスクが分からないまま状況を放置するのとでは意味が違うことを頭に入れておく。
2. 低減
   影響を減らすような対策を実施。機密データを一箇所に集めるのではなく分類して個別に認証方法を設定しデータ流出の範囲を分散する。
3. 移転(転換)
   リスクの管理を当事者以外に任せること。AWS の場合データーセンターへの侵入は Amazon が対策してくれているのでこちらでの対策は必要ない。責任の移転が行われている状態。
4. 回避
   リスクをそもそも発生させない。IAM アクセスキーの流出の例だとアクセスキーを作成しなければ防げる。

### 想定されるリスク

主にデータの盗難、改ざん、破壊。
脆弱性 → バグや設定不備によるシステムの[弱点、穴]が脆弱性と呼ばれる。最近の事例としては「log4j2 問題」
認証情報の流出 →GitHub 上に認証情報をアップしてしまうこと。
人為的な過負荷 → 多数のコンピュターからの連続のリクエストによるサーバー停止。DDos 攻撃。

### セキュリティ対策計画の主体は誰？

リスク対策計画の主体はエンジニアではなく事業責任者にある。ただしセキュリティ対策を実施するのはエンジニアのお仕事。想定される全てに対して対策を行うことは不可能なので考えうる対策は取った上で事業責任者への報告、合意を行い。最終的な判断は「事業責任者」ですよと伝えることがリスクの低減に繋がる。

### 脆弱性

脆弱性の中でも「アプリケーション」「OS ミドルウェア」 「ネットワーク、その他」に分けられる。
それぞれに対して AWS サービスが提供されている。

### アプリケーションの脆弱性対策

アプリケーションの脆弱性として挙げられるものはアプリケーションコード、モジュール、ライブラリ。近年のプロジェクトであればコードは GitHub で管理しているので[Dependabot]と言うモジュール、ライブラリの更新を指摘してくれる bot がある。ただし更新を指摘してくれるだけなので更新するかどうかは判断する必要あり、更新となるとサービスが止まるので容易に更新とはいかないのが難しいところ。
AWS でのセキュリティ対策（脆弱性）
CodeGuru Reviwer
AI などを用いて GitHub リポジトリにあるコードをスキャンし改善を指摘してくれるサービス。料金は 10 万行コードごとに 10 ドルかかるので導入の際は注意。

### Web アプリケーションの脆弱性

Web アプリケーションは Web サイトの技術をアプリケーションに転用したものなので仕組み上抱えている脆弱性がある。
対策としては WAF(Web Application Firewall)があり AWS の提供しているので導入する。WAF を導入したからといって全ての攻撃に対処できるわけではないので Web アプリケション側での対策は必要。
調べるべきキーワード[OWASP]

### SSL 接続

通信経路の暗号化はシステムの覗き見を防ぐ為に必要な対策。SSL 証明書を発行して利用するのがセオリー。
AWS サービスでは ACM が対応しているサービス。ただしこれで完璧というわけではなく HTTPS 通信を経由するようにアクセスを設定する必要あり。

### OS ミドルウェアの脆弱性対策

脆弱性情報をとりまとめる共通脆弱性評価システムである CVSS から情報を集める。
調べるべきキーワード[CVSS JVN NIST
対応しているサービス
Amazon Inspector
脆弱性のスキャンを行うサービスだが自動修復機能はないので発見した後での対策は必要。パッチを適用するルールを運用する場合は[SSM Patch Manager]というパッチ自動化支援サービスもある。

### ネットワーク、その他

通信の許可設定や IAM 権限の設定。
対策としては不要な権限の拒否 →「最小権限の法則」。特定の通信のみを許可するなど。
一番の対策はネットワークに繋げないこと、ただしこれでは何もできないので範囲をより小さくするなどして対策していく。
対応しているサービスは[Security Hub]ただい導入すると利用料が相当かかるのでそれなりのプロジェクトでなければ導入は見送る。

### 認証情報の流出

認証情報としては IAM ユーザーパスワードやアクセスキー情報、管理者ページのログイン情報、DB 接続情報などが挙げられる。対策としては IAM であれば、MFA を使う、ロールを中心とした権限でアクセスキーは読み取り専用にする。残りに関しては暗号化の実施などで対策を行う。
調べるサービス
AWS Key Management Service(KMS)
Secret Manager

### 人為的な過負荷（サーバー攻撃）

一時的な過負荷はオートスケーリングで対応はできるが人為的な過負荷だとそうもいかないので DDos 攻撃は受け止めるのではなくブロックして対応する。AWS Shiled である防ぐことができるのと、Standard が標準適用されている。
プランとしては Standard と Advanced があるが超高額サービスなので利用は個人での利用はほぼない。

### その他の知っておいた方が良いセキュリティ対策サービス

- IAM Access Analyzer
- GuardDuty
- Macie
- Detective
- Network Firawall

## 今回の課題の感想

今回は課題がないと言うことで講義のまとめと知らないキーワードを自分でも検索しました。セキュリティに関しては現役の方でもミスを犯すことがあると言うことなので細心の注意を払うこと、知見を広げておくことが必要だと感じました。
課題の方は一旦一休みで第八回へと進んでいきます。第六回の課題よりも第五回の課題が難しすぎて一山越えたように思います、学習は継続できているので次からの課題にもしっかり取り組もう。
